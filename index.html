<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tic Tac Toe - 2 Pemain</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#06b6d4;--muted:#94a3b8;--win:#10b981}
    *{box-sizing:border-box}
    body{font-family:Inter,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,#071029 0%, #081227 100%);color:#e6eef6}
    .container{width:420px;max-width:95vw;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:18px;border-radius:12px;box-shadow:0 8px 30px rgba(3,7,18,0.6)}
    h1{margin:0 0 8px;font-size:20px}
    .status{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
    .score{font-size:14px;color:var(--muted)}
    .board{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;background:transparent;padding:8px}
    .cell{width:120px;height:120px;max-width:12vw;max-height:12vw;display:flex;align-items:center;justify-content:center;font-size:48px;border-radius:8px;background:linear-gradient(180deg,#071428,#051020);cursor:pointer;user-select:none;transition:transform .08s ease,box-shadow .12s ease}
    .cell:active{transform:scale(.98)}
    .cell.disabled{cursor:not-allowed;opacity:.9}
    .controls{display:flex;gap:8px;margin-top:12px}
    button{background:var(--card);border:1px solid rgba(255,255,255,0.03);padding:8px 10px;border-radius:8px;color:var(--muted);cursor:pointer}
    button.primary{background:linear-gradient(90deg,var(--accent),#7dd3fc);color:#042027;border:none}
    .line{height:2px;background:rgba(255,255,255,0.03);margin:12px 0;border-radius:2px}
    .small{font-size:13px;color:var(--muted)}
    .highlight{color:var(--accent);font-weight:600}
    .winning-cell{background:linear-gradient(90deg, rgba(16,185,129,0.12), rgba(6,182,212,0.06));box-shadow:0 6px 18px rgba(6,182,212,0.06)}
    @media (max-width:420px){.cell{height:calc((100vw - 96px)/3);font-size:36px}}
  </style>
</head>
<body>
  <div class="container" role="main">
    <h1>Tic Tac Toe â€” 2 Pemain</h1>
    <div class="status">
      <div class="score">Giliran: <span id="currentPlayer" class="highlight">X</span></div>
      <div class="score">Skor â€” <span id="scoreX">X: 0</span> Â· <span id="scoreO">O: 0</span></div>
    </div>

    <div id="board" class="board" aria-label="Papan Tic Tac Toe">
      <!-- 9 cells auto-generated oleh JS -->
    </div>

    <div class="line"></div>

    <div style="display:flex;align-items:center;justify-content:space-between;gap:8px;flex-wrap:wrap">
      <div class="small">Klik kotak untuk menandai. Dua pemain bergantian.</div>
      <div class="controls">
        <button id="restartBtn" class="primary">Mulai Ulang</button>
        <button id="clearScoreBtn">Reset Skor</button>
      </div>
    </div>
  </div>

  <script>
    // Game state
    const boardEl = document.getElementById('board');
    const currentPlayerEl = document.getElementById('currentPlayer');
    const scoreXEl = document.getElementById('scoreX');
    const scoreOEl = document.getElementById('scoreO');
    const restartBtn = document.getElementById('restartBtn');
    const clearScoreBtn = document.getElementById('clearScoreBtn');

    let board = Array(9).fill('');
    let currentPlayer = 'X';
    let playing = true;
    let scores = { X: 0, O: 0 };

    const winningCombos = [
      [0,1,2],[3,4,5],[6,7,8], // rows
      [0,3,6],[1,4,7],[2,5,8], // cols
      [0,4,8],[2,4,6] // diagonals
    ];

    function createBoard(){
      boardEl.innerHTML = '';
      for(let i=0;i<9;i++){
        const cell = document.createElement('button');
        cell.className = 'cell';
        cell.setAttribute('data-index', i);
        cell.setAttribute('aria-label', 'Kotak ' + (i+1));
        cell.setAttribute('role', 'button');
        cell.addEventListener('click', onCellClick);
        boardEl.appendChild(cell);
      }
    }

    function onCellClick(e){
      const idx = Number(e.currentTarget.dataset.index);
      if(!playing || board[idx] !== '') return;

      board[idx] = currentPlayer;
      e.currentTarget.textContent = currentPlayer;
      e.currentTarget.classList.add('disabled');

      const winner = checkWinner();
      if(winner){
        playing = false;
        highlightWinningCells(winner.combo);
        scores[winner.player]++;
        updateScoreUI();
        showResult(`${winner.player} MENANG! ðŸŽ‰`);
        return;
      }

      if(board.every(cell => cell !== '')){
        playing = false;
        showResult('Seri!');
        return;
      }

      currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
      updateTurnUI();
    }

    function checkWinner(){
      for(const combo of winningCombos){
        const [a,b,c] = combo;
        if(board[a] && board[a] === board[b] && board[a] === board[c]){
          return { player: board[a], combo };
        }
      }
      return null;
    }

    function highlightWinningCells(combo){
      combo.forEach(i => {
        const cell = boardEl.querySelector(`[data-index=\"${i}\"]`);
        if(cell) cell.classList.add('winning-cell');
      });
    }

    function showResult(text){
      currentPlayerEl.textContent = text;
      currentPlayerEl.classList.remove('highlight');
      setTimeout(()=>{
        // after short delay keep the result visible but allow restart
      },300);
    }

    function updateScoreUI(){
      scoreXEl.textContent = `X: ${scores.X}`;
      scoreOEl.textContent = `O: ${scores.O}`;
    }

    function updateTurnUI(){
      currentPlayerEl.textContent = currentPlayer;
    }

    function restartGame(){
      board = Array(9).fill('');
      playing = true;
      currentPlayer = 'X';
      updateTurnUI();
      createBoard();
      // clear any winning highlights happen automatically because board recreated
    }

    restartBtn.addEventListener('click', restartGame);
    clearScoreBtn.addEventListener('click', ()=>{
      scores = { X:0, O:0 };
      updateScoreUI();
    });

    // inisialisasi
    createBoard();
    updateTurnUI();
    updateScoreUI();

    // keyboard accessibility: allow number keys 1-9 to place mark
    window.addEventListener('keydown', (e) => {
      if(!playing) return;
      const k = e.key;
      if(k >= '1' && k <= '9'){
        const idx = Number(k) - 1;
        const cell = boardEl.querySelector(`[data-index=\"${idx}\"]`);
        if(cell) cell.click();
      }
    });
  </script>
</body>
</html>
